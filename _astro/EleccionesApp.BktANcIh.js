import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{R as v,r as u}from"./index.TcFrwHGi.js";const k={id:"primarias_presidenciales_2025",name:"Primarias Presidenciales 2025",pactoMapping:{"INDEPENDIENTE COMUNES":"APRUEBO DIGNIDAD","PARTIDO COMUNISTA DE CHILE":"APRUEBO DIGNIDAD","REVOLUCION DEMOCRATICA":"APRUEBO DIGNIDAD","RENOVACION NACIONAL":"CHILE PODEMOS +","UNION DEMOCRATA INDEPENDIENTE":"CHILE PODEMOS +","INDEPENDIENTE CENTRO UNIDO":"INDEPENDIENTES UNIDOS","INDEPENDIENTE PARTIDO NACIONAL CIUDADANO":"INDEPENDIENTES UNIDOS","PARTIDO DEMOCRATA CRISTIANO":"NUEVO PACTO SOCIAL"},votesByRegion:{10:{"INDEPENDIENTE COMUNES":13347,"PARTIDO COMUNISTA DE CHILE":11830,"REVOLUCION DEMOCRATICA":7961,"RENOVACION NACIONAL":53782,"UNION DEMOCRATA INDEPENDIENTE":54240,"INDEPENDIENTE CENTRO UNIDO":7670,"INDEPENDIENTE PARTIDO NACIONAL CIUDADANO":3620,"PARTIDO DEMOCRATA CRISTIANO":45e3},13:{"INDEPENDIENTE COMUNES":25e3,"PARTIDO COMUNISTA DE CHILE":3e4,"RENOVACION NACIONAL":15e3,"UNION DEMOCRATA INDEPENDIENTE":12e3}}},U={id:"senadores_2025_projection",name:"Elecciones de Senadores 2025",candidates:["CAROLINA TOHA MORALES","GONZALO WINTER ETCHEBERRY","JAIME MULET MARTINEZ","JEANNETTE JARA ROMAN","VOTOS EN BLANCO","VOTOS NULOS"],votesByRegion:{1:{"CAROLINA TOHA MORALES":5420,"GONZALO WINTER ETCHEBERRY":1200,"JAIME MULET MARTINEZ":1200,"JEANNETTE JARA ROMAN":32e3,"VOTOS EN BLANCO":200,"VOTOS NULOS":300},2:{"CAROLINA TOHA MORALES":2100,"GONZALO WINTER ETCHEBERRY":500,"JAIME MULET MARTINEZ":5e3,"JEANNETTE JARA ROMAN":15e3,"VOTOS EN BLANCO":200,"VOTOS NULOS":150},3:{"CAROLINA TOHA MORALES":1500,"GONZALO WINTER ETCHEBERRY":300,"JAIME MULET MARTINEZ":5800,"JEANNETTE JARA ROMAN":12e3,"VOTOS EN BLANCO":2e3,"VOTOS NULOS":120},4:{"CAROLINA TOHA MORALES":4800,"GONZALO WINTER ETCHEBERRY":800,"JAIME MULET MARTINEZ":4200,"JEANNETTE JARA ROMAN":25e3,"VOTOS EN BLANCO":100,"VOTOS NULOS":250},5:{"CAROLINA TOHA MORALES":12500,"GONZALO WINTER ETCHEBERRY":4500,"JAIME MULET MARTINEZ":11800,"JEANNETTE JARA ROMAN":55e3,"VOTOS EN BLANCO":400,"VOTOS NULOS":550},6:{"CAROLINA TOHA MORALES":3200,"GONZALO WINTER ETCHEBERRY":600,"JAIME MULET MARTINEZ":6200,"JEANNETTE JARA ROMAN":28e3,"VOTOS EN BLANCO":100,"VOTOS NULOS":280},7:{"CAROLINA TOHA MORALES":4100,"GONZALO WINTER ETCHEBERRY":1200,"JAIME MULET MARTINEZ":8500,"JEANNETTE JARA ROMAN":38e3,"VOTOS EN BLANCO":200,"VOTOS NULOS":380},8:{"CAROLINA TOHA MORALES":9200,"GONZALO WINTER ETCHEBERRY":2500,"JAIME MULET MARTINEZ":13500,"JEANNETTE JARA ROMAN":45e3,"VOTOS EN BLANCO":500,"VOTOS NULOS":450},9:{"CAROLINA TOHA MORALES":2800,"GONZALO WINTER ETCHEBERRY":700,"JAIME MULET MARTINEZ":11200,"JEANNETTE JARA ROMAN":32e3,"VOTOS EN BLANCO":300,"VOTOS NULOS":320},10:{"CAROLINA TOHA MORALES":4500,"GONZALO WINTER ETCHEBERRY":1500,"JAIME MULET MARTINEZ":10500,"JEANNETTE JARA ROMAN":42e3,"VOTOS EN BLANCO":400,"VOTOS NULOS":420},11:{"CAROLINA TOHA MORALES":800,"GONZALO WINTER ETCHEBERRY":200,"JAIME MULET MARTINEZ":4200,"JEANNETTE JARA ROMAN":8e3,"VOTOS EN BLANCO":80,"VOTOS NULOS":80},12:{"CAROLINA TOHA MORALES":500,"GONZALO WINTER ETCHEBERRY":800,"JAIME MULET MARTINEZ":3200,"JEANNETTE JARA ROMAN":5e3,"VOTOS EN BLANCO":30,"VOTOS NULOS":50},13:{"CAROLINA TOHA MORALES":55e3,"GONZALO WINTER ETCHEBERRY":28e3,"JAIME MULET MARTINEZ":48e3,"JEANNETTE JARA ROMAN":25e4,"VOTOS EN BLANCO":5e3,"VOTOS NULOS":2500},14:{"CAROLINA TOHA MORALES":2200,"GONZALO WINTER ETCHEBERRY":800,"JAIME MULET MARTINEZ":3800,"JEANNETTE JARA ROMAN":12e3,"VOTOS EN BLANCO":200,"VOTOS NULOS":120},15:{"CAROLINA TOHA MORALES":1200,"GONZALO WINTER ETCHEBERRY":400,"JAIME MULET MARTINEZ":3100,"JEANNETTE JARA ROMAN":9e3,"VOTOS EN BLANCO":100,"VOTOS NULOS":90},16:{"CAROLINA TOHA MORALES":8282,"GONZALO WINTER ETCHEBERRY":1977,"JAIME MULET MARTINEZ":657,"JEANNETTE JARA ROMAN":14855,"VOTOS EN BLANCO":271,"VOTOS NULOS":747}}},f=[k,U],L={1:{id:"map_chile_Tarapaca",name:"Región de Tarapacá"},2:{id:"map_chile_Antofagasta",name:"Región de Antofagasta"},3:{id:"map_chile_Atacama",name:"Región de Atacama"},4:{id:"map_chile_Coquimbo",name:"Región de Coquimbo"},5:{id:"map_chile_Valparaiso",name:"Región de Valparaíso"},6:{id:"map_chile_OHiggins",name:"Región de O'Higgins"},7:{id:"map_chile_Maule",name:"Región del Maule"},8:{id:"map_chile_Biobio",name:"Región del Biobío"},9:{id:"map_chile_Araucania",name:"Región de la Araucanía"},10:{id:"map_chile_Los_Lagos",name:"Región de Los Lagos"},11:{id:"map_chile_Aysen",name:"Región de Aysén"},12:{id:"map_chile_Magallanes",name:"Región de Magallanes"},13:{id:"map_chile_Metropolitana",name:"Región Metropolitana"},14:{id:"map_chile_Los_Rios",name:"Región de Los Ríos"},15:{id:"map_chile_AricaParinacota",name:"Región de Arica y Parinacota"},16:{id:"map_chile_Nuble",name:"Región de Ñuble"}},M=({title:t,candidates:n,actionButtons:O,bgClass:c})=>e.jsx("div",{className:`card shadow-lg border-none ${c} mb-4 transition-all duration-300 overflow-hidden`,children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("h3",{className:"card-title text-[11px] font-black uppercase text-white/90 tracking-wider flex justify-between items-center",children:[e.jsx("span",{children:t}),e.jsx("span",{className:"bg-black/20 px-2 py-0.5 rounded-full text-[9px] font-bold",children:n.length})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[n.length===0&&e.jsx("div",{className:"text-[10px] text-white/40 italic text-center py-3 bg-black/10 rounded-lg",children:"Lista vacía"}),n.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-white/15 backdrop-blur-sm rounded-lg text-[11px] group hover:bg-white/25 transition-all border border-white/10",children:[e.jsx("span",{className:"font-bold text-white truncate flex-1 mr-2 drop-shadow-sm",title:l,children:l}),e.jsx("div",{className:"flex gap-1 shrink-0",children:O(l)})]},l))]})]})});function B({elections:t,selectedElectionId:n,onSelectElection:O,groupingMode:c,onSelectGrouping:l,currentCandidates:i,candidateTeams:d,onMoveCandidate:o}){const E=t.find(s=>s.id===n)?.pactoMapping,A=i.filter(s=>d[s]==="red"),R=i.filter(s=>d[s]==="blue"),N=i.filter(s=>!d[s]||d[s]==="neutral");return e.jsxs("div",{className:"w-96 shrink-0 flex flex-col h-full bg-base-100 shadow-2xl border-r border-base-300 z-20",children:[e.jsx("div",{className:"p-6 bg-slate-900 border-b border-slate-700",children:e.jsx("h1",{className:"text-xl font-black tracking-tight text-white flex items-center gap-2",children:"Calculadora Electoral"})}),e.jsxs("div",{className:"p-5 border-b border-slate-700 bg-slate-800 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 ml-0.5",children:[e.jsxs("div",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),e.jsx("label",{className:"text-[10px] font-black text-white/80 uppercase tracking-[0.15em]",children:"Elección"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("select",{className:"select select-bordered select-sm w-full h-11 bg-white border-base-300 hover:border-blue-400 focus:outline-none focus:border-blue-500 transition-all font-bold text-gray-700 shadow-sm pr-10 appearance-none text-[11px]",value:n,onChange:s=>O(s.target.value),children:t.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 group-hover:text-blue-500 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M19 9l-7 7-7-7"})})})]})]}),E&&e.jsxs("div",{className:"pt-2 border-t border-slate-700/50",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 ml-0.5",children:e.jsx("label",{className:"text-[10px] font-black text-white/60 uppercase tracking-[0.15em]",children:"Agrupar por"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>l("pacto"),className:`h-8 rounded text-[10px] font-black uppercase transition-all ${c==="pacto"?"bg-blue-600 text-white shadow-lg":"bg-slate-700 text-white/40 hover:bg-slate-600"}`,children:"Pacto"}),e.jsx("button",{onClick:()=>l("partido"),className:`h-8 rounded text-[10px] font-black uppercase transition-all ${c==="partido"?"bg-blue-600 text-white shadow-lg":"bg-slate-700 text-white/40 hover:bg-slate-600"}`,children:"Partido"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 scrollbar-hide",children:[e.jsx(M,{title:"Candidatos Rojo",candidates:A,bgClass:"bg-red-600",actionButtons:s=>e.jsx("button",{className:"btn btn-xs btn-square btn-ghost text-white hover:bg-white/20 border-white/20",onClick:()=>o(s,"neutral"),children:"✕"})}),e.jsx(M,{title:"Bolsa de Neutrales",candidates:N,bgClass:"bg-slate-600",actionButtons:s=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"w-6 h-6 rounded flex items-center justify-center bg-red-500 hover:bg-red-400 text-white shadow-sm transition-colors",onClick:()=>o(s,"red"),title:"Mover a Rojo",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 15l7-7 7 7"})})}),e.jsx("button",{className:"w-6 h-6 rounded flex items-center justify-center bg-blue-500 hover:bg-blue-400 text-white shadow-sm transition-colors",onClick:()=>o(s,"blue"),title:"Mover a Azul",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M19 9l-7 7-7-7"})})})]})}),e.jsx(M,{title:"Candidatos Azul",candidates:R,bgClass:"bg-blue-600",actionButtons:s=>e.jsx("button",{className:"btn btn-xs btn-square btn-ghost text-white hover:bg-white/20 border-white/20",onClick:()=>o(s,"neutral"),children:"✕"})})]})]})}const V=(t,n,O)=>{const c=Math.max(0,Math.min(1,O)),l=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),d=parseInt(t.substring(5,7),16),o=parseInt(n.substring(1,3),16),a=parseInt(n.substring(3,5),16),E=parseInt(n.substring(5,7),16),A=Math.round(l+(o-l)*c),R=Math.round(i+(a-i)*c),N=Math.round(d+(E-d)*c);return"#"+((1<<24)+(A<<16)+(R<<8)+N).toString(16).slice(1)},J=v.memo(({svgContent:t,regionColors:n,onRegionHover:O,onRegionLeave:c})=>{const l=u.useRef(null);return u.useEffect(()=>{if(!t||!l.current)return;Object.entries(n).forEach(([a,E])=>{const A=l.current.querySelector(`#${a}`);A&&(A.style.fill=E)});const i=l.current.querySelectorAll("path"),d=a=>O(a.target.id),o=()=>c();return i.forEach(a=>{a.addEventListener("mouseenter",d),a.addEventListener("mouseleave",o)}),()=>{i.forEach(a=>{a.removeEventListener("mouseenter",d),a.removeEventListener("mouseleave",o)})}},[t,n,O,c]),e.jsx("div",{ref:l,className:"w-full h-full flex justify-center items-center scale-[0.98] map-container",dangerouslySetInnerHTML:{__html:t||"..."}})});function H({mapSrc:t,results:n}){const[O,c]=u.useState(null),[l,i]=u.useState(null),[d,o]=u.useState({x:0,y:0}),[a,E]=u.useState(null),A=u.useMemo(()=>Object.entries(L).reduce((r,[x,h])=>(r[h.id]=x,r),{}),[]);u.useEffect(()=>{t&&fetch(t).then(r=>r.text()).then(r=>{c(r.replace(/width="[^"]*"/,"").replace(/height="[^"]*"/,"").replace(/style="[^"]*"/,""))})},[t]);const R=u.useMemo(()=>{const r={},x="#f3f4f6",h="#dc2626",T="#2563eb";return Object.entries(n).forEach(([g,{redVotes:p,blueVotes:b,total:C}])=>{const S=p+b,I=L[g]?.id;if(!I)return;if(S===0){r[I]=x;return}const D=Math.abs(p-b),w=Math.min(D/S/.3,1);r[I]=p>b?V(x,h,w):b>p?V(x,T,w):x}),r},[n]),N=v.useCallback(r=>{const x=A[r];x&&E(x)},[A]),s=v.useCallback(()=>{E(null),i(null)},[]);return u.useEffect(()=>{if(a&&n[a]){const{redVotes:r,blueVotes:x,total:h}=n[a];i({name:L[a]?.name||"Desconocida",redP:h?(r/h*100).toFixed(1):"0.0",blueP:h?(x/h*100).toFixed(1):"0.0",redVotes:r,blueVotes:x,total:h,winner:r>x?"Rojo":x>r?"Azul":"Empate"})}},[a,n]),e.jsxs("div",{className:"flex-1 relative bg-white flex items-center justify-center p-8 overflow-hidden",onMouseMove:r=>o({x:r.clientX,y:r.clientY}),children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(#000 1px, transparent 1px)",backgroundSize:"24px 24px"}}),e.jsx(J,{svgContent:O,regionColors:R,onRegionHover:N,onRegionLeave:s}),l&&e.jsxs("div",{style:{top:d.y+20,left:d.x+20,opacity:a?1:0},className:"fixed z-50 bg-white/90 backdrop-blur-md shadow-2xl rounded-xl p-4 border border-base-200 pointer-events-none flex flex-col gap-3 w-56 transition-all duration-200 animate-in fade-in zoom-in-95",children:[e.jsx("div",{className:"flex flex-col border-b border-gray-100 pb-2",children:e.jsx("h3",{className:"text-xs font-black text-gray-800 leading-tight",children:l.name})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between text-[11px] font-bold",children:[e.jsxs("span",{className:"text-red-600 text-[10px]",children:["Equipo Rojo (",l.redP,"%)"]}),e.jsx("span",{className:"text-gray-500 font-medium text-[10px]",children:l.redVotes.toLocaleString()})]}),e.jsx("div",{className:"h-1.5 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 transition-all duration-500",style:{width:`${l.redP}%`}})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between text-[11px] font-bold",children:[e.jsxs("span",{className:"text-blue-600 text-[10px]",children:["Equipo Azul (",l.blueP,"%)"]}),e.jsx("span",{className:"text-gray-500 font-medium text-[10px]",children:l.blueVotes.toLocaleString()})]}),e.jsx("div",{className:"h-1.5 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${l.blueP}%`}})})]})]}),e.jsxs("div",{className:"text-[9px] text-gray-400 font-medium text-center",children:["Votos escrutados: ",e.jsx("span",{className:"text-gray-600",children:l.total.toLocaleString()})]})]}),e.jsx("style",{children:`
                .map-container svg { height: 100%; width: 100%; max-height: 94vh; object-fit: contain; }
                .map-chile { stroke: #fff; stroke-width: 0.4px; transition: fill 0.4s ease; cursor: pointer; }
                .map-chile:hover { stroke: #000; stroke-width: 1px; brightness: 0.98; z-index: 10; }
            `})]})}const j=({data:t,title:n,size:O=80,centerText:c,centerColor:l="#374151"})=>{const i=t.reduce((a,E)=>a+E.value,0),d=15.91549430918954;let o=0;return e.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 bg-white/60 backdrop-blur-md rounded-2xl border border-white/20 shadow-xl group transition-all min-w-[160px]",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest text-center leading-none px-1",children:n}),e.jsxs("div",{className:"relative",style:{width:O,height:O},children:[e.jsxs("svg",{viewBox:"0 0 42 42",className:"transform -rotate-90 drop-shadow-md w-full h-full",children:[e.jsx("circle",{cx:"21",cy:"21",r:d,fill:"transparent",stroke:"#f1f5f9",strokeWidth:"10"}),t.map((a,E)=>{if(i===0)return null;const A=a.value/i*100,R=`${A} ${100-A}`,N=-o;return o+=A,e.jsx("circle",{cx:"21",cy:"21",r:d,fill:"transparent",stroke:a.color,strokeWidth:"10",strokeDasharray:R,strokeDashoffset:N,className:"transition-all duration-700 ease-in-out"},E)})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"w-[72%] h-[72%] bg-white/95 rounded-full shadow-sm border border-white/50 backdrop-blur-sm flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] font-black tabular-nums",style:{color:l},children:c})})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 w-full mt-2",children:t.map((a,E)=>e.jsxs("div",{className:"flex items-center justify-between gap-4 px-1",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx("div",{className:"w-2 h-2 rounded-full shrink-0 shadow-sm",style:{backgroundColor:a.color}}),e.jsx("span",{className:"text-[9px] font-extrabold text-slate-700 truncate",children:a.label})]}),e.jsxs("span",{className:"text-[9px] font-black text-slate-600 tabular-nums whitespace-nowrap",children:[Math.round(a.value).toLocaleString()," ",e.jsxs("span",{className:"text-slate-400 font-bold text-[8px] ml-1",children:[i>0?(a.value/i*100).toFixed(1):0,"%"]})]})]},E))})]})};function P({summary:t}){const n=t.redVotes+t.blueVotes,O=Math.max(0,t.totalVotes-n),c=n>0?(Math.abs(t.redVotes-t.blueVotes)/n*100).toFixed(1):"0.0",l=t.redVotes>t.blueVotes?"#dc2626":t.blueVotes>t.redVotes?"#2563eb":"#64748b",i=t.totalVotes>0?(Math.abs(t.redVotes-t.blueVotes)/t.totalVotes*100).toFixed(1):"0.0",d=t.redVotes>t.blueVotes?"#dc2626":t.blueVotes>t.redVotes?"#2563eb":"#64748b",o=t.redRegions+t.blueRegions+t.neutralRegions,a=o>0?(Math.abs(t.redRegions-t.blueRegions)/o*100).toFixed(1):"0.0",E=t.redRegions>t.blueRegions?"#dc2626":t.blueRegions>t.redRegions?"#2563eb":"#94a3b8",A=[{label:"Rojo",value:t.redVotes,color:"#dc2626"},{label:"Azul",value:t.blueVotes,color:"#2563eb"}],R=[{label:"Rojo",value:t.redVotes,color:"#dc2626"},{label:"Azul",value:t.blueVotes,color:"#2563eb"},{label:"Gris",value:O,color:"#94a3b8"}],N=[{label:"Rojo",value:t.redRegions,color:"#dc2626"},{label:"Azul",value:t.blueRegions,color:"#2563eb"},{label:"Gris",value:t.neutralRegions,color:"#94a3b8"}];return e.jsxs("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 flex flex-col gap-4 pointer-events-auto z-30",children:[e.jsx(j,{title:"Bipolaridad (R vs A)",data:n>0?A:[{value:1,color:"#f1f5f9"}],centerText:`+${c}%`,centerColor:l}),e.jsx(j,{title:"Peso en la Elección",data:t.totalVotes>0?R:[{value:1,color:"#f1f5f9"}],centerText:`+${i}%`,centerColor:d}),e.jsx(j,{title:"Regiones Ganadas",data:o>0?N:[{value:1,color:"#f1f5f9"}],centerText:`+${a}%`,centerColor:E})]})}function y({mapSrc:t}){const[n,O]=u.useState(f[0].id),[c,l]=u.useState({}),[i,d]=u.useState("partido"),o=u.useMemo(()=>f.find(N=>N.id===n)||f[0],[n]),a=u.useMemo(()=>o?o.pactoMapping?i==="pacto"?[...new Set(Object.values(o.pactoMapping))]:Object.keys(o.pactoMapping):o.candidates:[],[o,i]);u.useEffect(()=>{l(N=>{const s={...N};return a.forEach(r=>{r in s||(s[r]="neutral")}),s})},[a]);const E=(N,s)=>{l(r=>({...r,[N]:s}))},{aggregatedResults:A,nationalSummary:R}=u.useMemo(()=>{const N={},s={redVotes:0,blueVotes:0,totalVotes:0,redRegions:0,blueRegions:0,neutralRegions:0};return o?(Object.entries(o.votesByRegion).forEach(([r,x])=>{let h=0,T=0;const m=Object.values(x).reduce((g,p)=>g+p,0);Object.entries(x).forEach(([g,p])=>{let b="neutral";if(o.pactoMapping)if(i==="pacto"){const C=o.pactoMapping[g];b=c[C]}else b=c[g];else b=c[g];b==="red"&&(h+=p),b==="blue"&&(T+=p)}),N[r]={redVotes:h,blueVotes:T,total:m},s.redVotes+=h,s.blueVotes+=T,s.totalVotes+=m,h>T?s.redRegions++:T>h?s.blueRegions++:s.neutralRegions++}),{aggregatedResults:N,nationalSummary:s}):{aggregatedResults:N,nationalSummary:s}},[o,c,i]);return e.jsxs("div",{className:"flex w-full h-screen bg-base-200 overflow-hidden font-sans",children:[e.jsx(B,{elections:f,selectedElectionId:n,onSelectElection:O,groupingMode:i,onSelectGrouping:d,currentCandidates:a,candidateTeams:c,onMoveCandidate:E}),e.jsxs("div",{className:"flex-1 relative flex overflow-hidden",children:[e.jsx(H,{mapSrc:t,results:A}),e.jsx(P,{summary:R})]})]})}export{y as default};
