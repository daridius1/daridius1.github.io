---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import BentoCard from "../components/BentoCard.astro";
import PostCard from "../components/PostCard";

const sections = [
	{
		title: "Proyectos",
		description: "Proyectos y experimentos en curso.",
	},
	{
		title: "Reviews",
		description: "Análisis de tecnología y cultura.",
	},
	{
		title: "Ideas",
		description: "Reflexiones y opiniones personales.",
	},
	{
		title: "Sobre Mí",
		description: "Quién soy y qué hago en la red.",
	},
];

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout title="daridius">
	<div class="space-y-12">
		<!-- Categories Grid -->
		<section>
			<div
				class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 w-full"
			>
				{
					sections.map((section) => (
						<BentoCard
							title={section.title}
							description={section.description}
						/>
					))
				}
			</div>
		</section>

		<!-- Blog Posts Grid -->
		<section>
			<h2 class="text-3xl font-black text-white mb-10 tracking-tighter">
				Últimas Publicaciones
			</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				{
					posts.slice(0, 6).map((post) => (
						<PostCard
							title={post.data.title}
							description={post.data.description}
							date={post.data.pubDate.toLocaleDateString(
								"es-ES",
								{
									year: "numeric",
									month: "long",
									day: "numeric",
									timeZone: "UTC",
								},
							)}
							slug={post.slug}
							tags={post.data.tags}
						/>
					))
				}
			</div>

			{
				posts.length > 6 && (
					<div class="mt-12 flex justify-center">
						<a
							href="/blog"
							class="group flex items-center gap-2 text-[10px] font-bold uppercase tracking-[0.2em] text-white/50 hover:text-white transition-all bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 px-8 py-3 rounded-full"
						>
							Explorar Blog
							<svg
								xmlns="http://www.w3.org/2000/svg"
								class="h-3.5 w-3.5 transition-transform group-hover:translate-x-1"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2.5"
									d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"
								/>
							</svg>
						</a>
					</div>
				)
			}
		</section>
	</div>
</Layout>
