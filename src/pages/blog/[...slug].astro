---
import { getCollection } from "astro:content";
import "../../styles/global.css";
import heroImg from "../../assets/bg.png"; // Importamos la misma imagen de fondo

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.slug },
        props: { post },
    }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<html lang="es">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <title>{post.data.title} | daridius</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap"
            rel="stylesheet"
        />
    </head>
    <body class="min-h-screen text-white antialiased bg-transparent">
        <!-- Background Image Fijo (Igual que en Home) -->
        <div class="fixed inset-0 z-[-1]">
            <div
                class="absolute inset-0 bg-cover bg-center"
                style={`background-image: url(${heroImg.src});`}
            >
            </div>
            <div class="absolute inset-0 bg-black/50"></div>
            <!-- Un poco más oscuro para leer bien -->
        </div>

        <!-- Navbar -->
        <nav
            class="navbar bg-black/60 backdrop-blur-md border-b border-white/5 px-8 flex justify-between items-center z-50 sticky top-0"
        >
            <a
                href="/"
                class="text-xl font-black tracking-tighter capitalize hover:text-white/80 transition-colors"
            >
                daridius
            </a>
            <div class="flex gap-4">
                <a
                    href="/blog"
                    class="text-sm font-bold uppercase tracking-widest text-white/50 hover:text-white transition-colors"
                >
                    Blog
                </a>
            </div>
        </nav>

        <main class="container mx-auto max-w-4xl px-6 py-12 relative z-10">
            <!-- Contenedor del Artículo con efecto Cristal -->
            <article
                class="bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl p-8 md:p-12 shadow-2xl"
            >
                <!-- Header del Post -->
                <header
                    class="mb-12 text-center border-b border-white/10 pb-10"
                >
                    <div class="flex justify-center gap-2 mb-6 flex-wrap">
                        {
                            post.data.tags.map((tag) => (
                                <span class="badge badge-primary badge-outline text-[10px] font-bold uppercase tracking-widest px-3 py-3">
                                    {tag}
                                </span>
                            ))
                        }
                    </div>
                    <h1
                        class="text-4xl md:text-5xl font-black tracking-tighter mb-6 leading-tight text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/50"
                    >
                        {post.data.title}
                    </h1>
                    <p
                        class="text-white/40 text-sm font-medium uppercase tracking-widest"
                    >
                        {
                            post.data.pubDate.toLocaleDateString("es-ES", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                                timeZone: "UTC",
                            })
                        }
                    </p>
                </header>

                <!-- Contenido (Prose mejorado para contraste) -->
                <div
                    class="prose prose-invert prose-lg max-w-none
					prose-headings:font-black prose-headings:tracking-tight prose-headings:text-white
					prose-p:text-gray-300 prose-p:leading-relaxed
					prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline
					prose-blockquote:border-l-blue-500 prose-blockquote:bg-white/5 prose-blockquote:py-2 prose-blockquote:px-4 prose-blockquote:rounded-r
					prose-strong:text-white prose-strong:font-bold
					prose-li:text-gray-300
					prose-code:text-cyan-400 prose-code:bg-black/50 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:before:content-none prose-code:after:content-none
					prose-pre:bg-[#0d1117] prose-pre:border prose-pre:border-white/10 prose-pre:shadow-lg"
                >
                    <Content />
                </div>
            </article>

            <!-- Footer Post -->
            <div class="mt-12 text-center">
                <a
                    href="/"
                    class="btn btn-ghost gap-2 text-white/50 hover:text-white"
                >
                    ← Volver al inicio
                </a>
            </div>
        </main>
    </body>
</html>
